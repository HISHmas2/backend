
# ğŸ„ HISHmas Backend ê°œë°œ í™˜ê²½ & í˜‘ì—… ê°€ì´ë“œ

> **Express + Node.js ê¸°ë°˜ì˜ HISHmas Backend API ì„œë²„ í‘œì¤€ ê°€ì´ë“œë¼ì¸ì…ë‹ˆë‹¤.**
> ì•ˆì •ì ì¸ ì„œë²„ ê°œë°œ, ì˜ˆì¸¡ ê°€ëŠ¥í•œ API êµ¬ì¡°, í˜‘ì—… ì¹œí™”ì ì¸ íŒ¨í„´ì„ ì§€í–¥í•©ë‹ˆë‹¤.

---

# ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

## ğŸ§© Backend Framework Â· Tools

### **Node.js + Express**

* MVC-ish êµ¬ì¡° ê¸°ë°˜ì˜ ê²½ëŸ‰ ì„œë²„ í”„ë ˆì„ì›Œí¬
* RESTful API ê°œë°œì— ìµœì í™”

### **PostgreSQL (AWS RDS)**

* ê´€ê³„í˜• DB
* ì•ˆì •ì ì¸ íŠ¸ëœì­ì…˜ ì²˜ë¦¬
* SQL ê¸°ë°˜ Schema ê´€ë¦¬

### **JWT + HttpOnly Cookie ì¸ì¦**

* JWTë¥¼ Cookieë¡œ ì „ë‹¬í•˜ëŠ” ì•ˆì „í•œ ì¸ì¦ êµ¬ì¡°
* Sessionless + CSRF ë³´í˜¸
* í”„ë¡ íŠ¸ì—ì„œ ì•¡ì„¸ìŠ¤ ë¶ˆê°€ëŠ¥í•œ Secure Cookie ê¸°ë°˜

### **Swagger (OpenAPI 3.0)**

* ìë™ API ë¬¸ì„œí™”
* ê°œë°œ/í…ŒìŠ¤íŠ¸ìš© Playground ì œê³µ
* ë°°í¬ í™˜ê²½ì—ì„œë„ API ë¬¸ì„œ ìë™ ì—…ë°ì´íŠ¸

### **AWS ë°°í¬ í™˜ê²½**

* EC2 ê¸°ë°˜ ì„œë²„ ìš´ì˜
* pm2ë¡œ ë¬´ì¤‘ë‹¨ ì„œë¹„ìŠ¤
* Nginx ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ êµ¬ì„± ê°€ëŠ¥
* .env ê´€ë¦¬ë¡œ ì•ˆì „í•œ í‚¤ ìœ ì§€

---

# âš™ï¸ CI / CD

### **GitHub â†’ AWS EC2 ìˆ˜ë™/ìë™ ë°°í¬ì˜ˆì •**

* main/feat ë¸Œëœì¹˜ ë³‘í•© í›„ EC2 ì„œë²„ pull
* pm2 reloadë¡œ ë¬´ì¤‘ë‹¨ ì¬ë°°í¬
* í•„ìš”ì‹œ GitHub Actions â†’ EC2 ìë™ ë°°í¬ êµ¬ì„± ê°€ëŠ¥

---

# ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡° (Project Structure)

> Express ë°±ì—”ë“œëŠ” **ë¼ìš°íŒ… / ì»¨íŠ¸ë¡¤ëŸ¬ / ì„œë¹„ìŠ¤ / ëª¨ë¸ / ì„¤ì •(config)**ì„ ëª…í™•íˆ ë‚˜ëˆ„ëŠ”
> **Layered Architecture**ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

```
backend/
â”œâ”€ src/
â”‚  â”œâ”€ config/                      # ì„¤ì • íŒŒì¼ë“¤
â”‚  â”‚  â”œâ”€ db.js                     # PostgreSQL Pool ì„¤ì •
â”‚  â”‚  â”œâ”€ swagger.js                # Swagger ì„¤ì •
â”‚  â”‚  â””â”€ env.js                    # í™˜ê²½ë³€ìˆ˜ ë¡œë”© (dotenv)
â”‚  â”‚
â”‚  â”œâ”€ routes/                      # API ë¼ìš°íŠ¸
â”‚  â”‚  â”œâ”€ authRoutes.js             # ë¡œê·¸ì¸ / íšŒì›ê°€ì…
â”‚  â”‚  â”œâ”€ letterRoutes.js           # í¸ì§€ ì „ì†¡/ì¡°íšŒ
â”‚  â”‚  â”œâ”€ treeRoutes.js             # íŠ¸ë¦¬ / ì˜¤ë¸Œì íŠ¸ Â· ê³µìœ í˜ì´ì§€
â”‚  â”‚  â””â”€ index.js                  # ë¼ìš°íŠ¸ ë¬¶ìŒ
â”‚  â”‚
â”‚  â”œâ”€ controllers/                 # ìš”ì²­ í•¸ë“¤ëŸ¬ (req/res)
â”‚  â”‚  â”œâ”€ authController.js
â”‚  â”‚  â”œâ”€ letterController.js
â”‚  â”‚  â””â”€ treeController.js
â”‚  â”‚
â”‚  â”œâ”€ services/                    # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (DB ì²˜ë¦¬ í¬í•¨)
â”‚  â”‚  â”œâ”€ authService.js
â”‚  â”‚  â”œâ”€ letterService.js
â”‚  â”‚  â””â”€ treeService.js
â”‚  â”‚
â”‚  â”œâ”€ models/                      # DB Model (ì¿¼ë¦¬ ëª¨ë“ˆ)
â”‚  â”‚  â”œâ”€ userModel.js
â”‚  â”‚  â”œâ”€ letterModel.js
â”‚  â”‚  â””â”€ treeModel.js
â”‚  â”‚
â”‚  â”œâ”€ middlewares/
â”‚  â”‚  â”œâ”€ authMiddleware.js         # JWT + Cookie ì¸ì¦ ê²€ì‚¬
â”‚  â”‚  â””â”€ errorMiddleware.js        # ê¸€ë¡œë²Œ ì—ëŸ¬ ì²˜ë¦¬
â”‚  â”‚
â”‚  â”œâ”€ utils/
â”‚  â”‚  â”œâ”€ jwt.js                    # JWT ìƒì„±/ê²€ì¦ ë„êµ¬
â”‚  â”‚  â””â”€ response.js               # í‘œì¤€í™” ì‘ë‹µ í¬ë§·
â”‚  â”‚
â”‚  â”œâ”€ server.js                    # ì„œë²„ ì—”íŠ¸ë¦¬í¬ì¸íŠ¸ (app.listen)
â”‚  â””â”€ app.js                       # Express ì´ˆê¸°í™”, ë¯¸ë“¤ì›¨ì–´, ë¼ìš°íŠ¸ ë“±ë¡
â”‚
â”œâ”€ .env                             # í™˜ê²½ë³€ìˆ˜
â”œâ”€ .gitignore
â”œâ”€ package.json
â””â”€ README.md
```

---

# ğŸ“Œ êµ¬ì¡° ì„¤ê³„ ì² í•™

## ğŸ”¹ 1. Layered Architecture (Controller â†’ Service â†’ Model)

### **Controller**

* ìš”ì²­/ì‘ë‹µë§Œ ë‹´ë‹¹
* ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì ˆëŒ€ ë„£ì§€ ì•ŠìŒ

### **Service**

* ëª¨ë“  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
* ë°ì´í„° ì¡°í•©/ê²€ì¦/ì¡°ê±´ ì²˜ë¦¬
* DB ëª¨ë¸ í˜¸ì¶œ

### **Model**

* PostgreSQL ì¿¼ë¦¬ íŒŒì¼
* SQL ì‹¤í–‰ë§Œ ë‹´ë‹¹, ë¡œì§ ì—†ìŒ

â¡ï¸ **ê° ë ˆì´ì–´ ì±…ì„ì´ ëª…í™•í•´ì¡Œê¸° ë•Œë¬¸ì— ìœ ì§€ë³´ìˆ˜ ê°œì©”ê²Œ ì‰¬ì›€**

---

## ğŸ”¹ 2. JWT + HttpOnly Cookie ì¸ì¦ íŒ¨í„´

* ë¡œê·¸ì¸ ì„±ê³µ â†’ ì„œë²„ê°€ JWTë¥¼ **HttpOnly Cookie**ë¡œ ì „ì†¡
* ìš”ì²­ ì‹œ ìë™ìœ¼ë¡œ Cookie ë™ë´‰
* ì¸ì¦ ë¯¸ë“¤ì›¨ì–´ì—ì„œ ì¿ í‚¤ ê²€ì‚¬ í›„ ì‚¬ìš©ì ì‹ë³„

â¡ï¸ XSS ì•ˆì „ + Sessionless ì„œë²„ êµ¬ì¡°

---




